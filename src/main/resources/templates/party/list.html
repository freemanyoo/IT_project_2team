<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>íŒŒí‹° ëª¨ì§‘ ëª©ë¡</title>
</head>
<body>
<h1>ğŸ½ íŒŒí‹° ëª¨ì§‘ ëª©ë¡</h1>

<!-- âœ… ê²€ìƒ‰/í•„í„° í¼ -->
<form method="get" th:action="@{/party/list}">
    <input type="text" name="keyword" placeholder="ì œëª© ê²€ìƒ‰" th:value="${requestDTO.keyword}" />

    <select name="foodCategory">
        <option value="">ì¹´í…Œê³ ë¦¬ ì„ íƒ</option>
        <option value="í•œì‹" th:selected="${requestDTO.foodCategory == 'í•œì‹'}">í•œì‹</option>
        <option value="ì–‘ì‹" th:selected="${requestDTO.foodCategory == 'ì–‘ì‹'}">ì–‘ì‹</option>
        <option value="ì¤‘ì‹" th:selected="${requestDTO.foodCategory == 'ì¤‘ì‹'}">ì¤‘ì‹</option>
        <option value="ì¼ì‹" th:selected="${requestDTO.foodCategory == 'ì¼ì‹'}">ì¼ì‹</option>
    </select>

    <select name="genderLimit">
        <option value="">ì„±ë³„ ì œí•œ</option>
        <option value="ALL" th:selected="${requestDTO.genderLimit == 'ALL'}">ëª¨ë‘</option>
        <option value="MALE" th:selected="${requestDTO.genderLimit == 'MALE'}">ë‚¨ìë§Œ</option>
        <option value="FEMALE" th:selected="${requestDTO.genderLimit == 'FEMALE'}">ì—¬ìë§Œ</option>
    </select>

    <button type="submit">ê²€ìƒ‰</button>
</form>

<br/>

<!-- ê²Œì‹œê¸€ ëª©ë¡ í…Œì´ë¸” -->
<table border="1">
    <thead>
    <tr>
        <th>ID</th>
        <th>ì œëª©</th>
        <th>ì‘ì„±ì</th>
        <th>ì¹´í…Œê³ ë¦¬</th>
        <th>ëª¨ì„ ì‹œê°„</th>
        <th>ë‚¨ì€ ì‹œê°„</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="party : ${response.dtoList}"
        th:class="${party.remainingTime == 'ë§ˆê°ë¨'} ? 'expired' : ''">
        <td th:text="${party.id}">1</td>
        <td><a th:href="@{/party/read(id=${party.id})}" th:text="${party.title}">ì œëª©</a></td>
        <td th:text="${party.writerId}">ì‘ì„±ì</td>
        <td th:text="${party.foodCategory}">ì¹´í…Œê³ ë¦¬</td>
        <td th:text="${party.partyTime}">ëª¨ì„ ì‹œê°„</td>
        <td th:text="${party.remainingTime}">ë‚¨ì€ ì‹œê°„</td>
    </tr>
    </tbody>
</table>


<!-- âœ… í˜ì´ì§• ì˜ì—­ -->
<div>
    <ul style="list-style:none; display:flex; gap:5px; padding:0;">
        <li th:if="${response.prev}">
            <a th:href="@{/party/list(page=${response.start - 1},
                                      keyword=${requestDTO.keyword},
                                      foodCategory=${requestDTO.foodCategory},
                                      genderLimit=${requestDTO.genderLimit})}">ì´ì „</a>
        </li>

        <li th:each="i : ${#numbers.sequence(response.start, response.end)}">
            <a th:href="@{/party/list(page=${i},
                                      keyword=${requestDTO.keyword},
                                      foodCategory=${requestDTO.foodCategory},
                                      genderLimit=${requestDTO.genderLimit})}"
               th:text="${i}"
               th:classappend="${i == response.page} ? 'active' : ''">
            </a>
        </li>

        <li th:if="${response.next}">
            <a th:href="@{/party/list(page=${response.end + 1},
                                      keyword=${requestDTO.keyword},
                                      foodCategory=${requestDTO.foodCategory},
                                      genderLimit=${requestDTO.genderLimit})}">ë‹¤ìŒ</a>
        </li>
    </ul>
</div>

<!-- ê°•ì¡° ìŠ¤íƒ€ì¼ -->
<style>
    .active {
        font-weight: bold;
        text-decoration: underline;
        color: red;
    }

    .expired {
        background-color: #e0e0e0;
        color: gray;
    }

    .expired a {
        pointer-events: none;
        color: gray;
        text-decoration: line-through;
    }
</style>

</body>
</html>
