<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ì‹ ê³ í•˜ê¸° í…ŒìŠ¤íŠ¸</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-5">
<div th:if="${success}" class="alert alert-success" role="alert" th:text="${success}"></div>
<div th:if="${error}" class="alert alert-danger" role="alert" th:text="${error}"></div>

<h2>ê²Œì‹œê¸€</h2>
<p>ì´ ê²Œì‹œê¸€ì€ ì‹ ê³ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<!-- âœ… ì‹ ê³ í•˜ê¸° ë²„íŠ¼ -->
<button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#reportModal">
    ğŸš¨ ì‹ ê³ í•˜ê¸°
</button>

<div class="mt-3">
    <h3>ë‹¤ë¥¸ ìœ ì €ë¡œ ì‹ ê³  (í…ŒìŠ¤íŠ¸ ëª©ì )</h3>
    <button class="btn btn-outline-danger me-2" data-bs-toggle="modal" data-bs-target="#reportModal" data-simulated-user="testuser1">User 1 ì‹ ê³ </button>
    <button class="btn btn-outline-danger me-2" data-bs-toggle="modal" data-bs-target="#reportModal" data-simulated-user="testuser2">User 2 ì‹ ê³ </button>
    <button class="btn btn-outline-danger me-2" data-bs-toggle="modal" data-bs-target="#reportModal" data-simulated-user="testuser3">User 3 ì‹ ê³ </button>
    <button class="btn btn-outline-danger me-2" data-bs-toggle="modal" data-bs-target="#reportModal" data-simulated-user="testuser4">User 4 ì‹ ê³ </button>
    <button class="btn btn-outline-danger" data-bs-toggle="modal" data-bs-target="#reportModal" data-simulated-user="testuser5">User 5 ì‹ ê³ </button>
</div>

<!-- âœ… ì‹ ê³ í•˜ê¸° ëª¨ë‹¬ -->
<div class="modal fade" id="reportModal" tabindex="-1">
    <div class="modal-dialog">
        <form th:action="@{/report/submit}" method="post">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ì‹ ê³ í•˜ê¸°</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" name="boardId" value="1" /> <!-- ê²Œì‹œê¸€ ID -->
                    <input type="hidden" name="simulatedReporter" id="simulatedReporter" value="" /> <!-- ì‹œë®¬ë ˆì´ì…˜ëœ ì‹ ê³ ì -->
                    <label for="reason">ì‹ ê³  ì‚¬ìœ </label>
                    <textarea name="reason" id="reason" class="form-control" required></textarea>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-danger">ì œì¶œ</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ë‹«ê¸°</button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- Bootstrap JS (ëª¨ë‹¬ ì‘ë™ìš©) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var reportModal = document.getElementById('reportModal');
        reportModal.addEventListener('show.bs.modal', function (event) {
            // ëª¨ë‹¬ì„ íŠ¸ë¦¬ê±°í•œ ë²„íŠ¼
            var button = event.relatedTarget;
            // ë²„íŠ¼ì˜ data-simulated-user ì†ì„± ê°’ ê°€ì ¸ì˜¤ê¸°
            var simulatedUser = button.getAttribute('data-simulated-user');
            // ìˆ¨ê²¨ì§„ input í•„ë“œì— ê°’ ì„¤ì •
            var simulatedReporterInput = reportModal.querySelector('#simulatedReporter');
            if (simulatedReporterInput) {
                simulatedReporterInput.value = simulatedUser || ''; // ê°’ì´ ì—†ìœ¼ë©´ ë¹ˆ ë¬¸ìì—´
            }
        });
    });
</script>
</body>
</html>
